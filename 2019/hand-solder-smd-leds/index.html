<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Hand-soldering tiny charlieplexed LEDs</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page">
      <h1>Hand-soldering tiny charlieplexed LEDs</h1>

      <figure class="row">
        <video poster="3-wire.jpg" autoplay loop>
          <source src="3-wire.webm" />
          <source src="3-wire.mp4" />
          <img src="3-wire.jpg" alt="tiny LED sculpture with six surface-mount LEDs soldered directly onto three wires, flashing in an ascending pattern" />
        </video>
      </figure>

      <p>Recently, an awesome blog post found me that started with this sentence:</p>

      <blockquote>
        <p>Have you ever wanted to build a LED matrix display using hand-crafting methods, such as sewing, weaving, or papercraft?</p>
        <p><cite><a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank"><em>LED multiplexing layouts for hand-crafting</em></a> by <a href="https://crawlingrobotfortress.blogspot.com/" target="_blank">M Rule</a></cite></p>
      </blockquote>

      <p>I've been itching to wire some tiny surface-mount LEDs in some kind of flexible multi-plexed array since this spring, when I <a href="https://www.tindie.com/products/onesandzeros/printer-power/" target="_blank">semi-accidentally ended up with 1000 pink LEDs</a> in my posession. In my mind, I was seeing some kind of dense fabric-y geodesic dome.</p>

      <figure class="row">
        <img
          alt="1000 pink SMD leds on a reel, and a close-up detail shot with tweezers and a finger for scale. they are tiny!"
          src="1k-smds.jpg"
        />
      </figure>

      <p>My friend <a href="https://www.galenmacdonald.com/" target="_blank">Galen</a> shared excitement about <a href="https://en.wikipedia.org/wiki/Charlieplexing" target="_blank">Charlieplexing</a> last year, something I've been vaguely aware of for a while, but never dug into. Its <a href="https://en.wikipedia.org/wiki/Charlieplexing" target="_blank">wiki article</a> and M Rule's blog have neat ways to describe Charlieplexing, but the essence of how I now understand it is this:</p>

      <ol>
        <li><p>Every pin connects to every other pin through an LED. Put every pin in <code>INPUT</code> mode so they're electrically disconnected.</p></li>
        <li><p>To turn on one specific LED, write the pin connected to that LED's cathode (negative side) to output <code>LOW</code>, and the one connected to its anode <code>HIGH</code>.</p></li>
        <li><p>Double the number of LEDs from there by hooking them up parallel pairs with one turned backward ‚Äì swap the <code>HIGH</code> for <code>LOW</code> and <code>LOW</code> for <code>HIGH</code> to reverse the current flow, lighting one or the other of any pair.</p></li>
      </ol>

      <p>From <em>connect every pin to every other pin</em>, you can get a sense that this lets you control a lot of LEDs with a small number of microcontroller (eg., Arduino) pins.</p>

      <figure>
        <div class="row">
          <a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank">
            <img
              alt="A column of 30 colourful LEDs flashing in an ascending pattern, standing up in a breadboard."
              src="m-rule-loop.gif"
            />
          </a>
        </div>
        <figcaption>M Rule's beautiful <a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank">beaded woven multi-colour Charlieplexed array</a> üòç</figcaption>
      </figure>

      <p>So, this seemed like a perfect way to start working through my thousand pink LEDs! I started with the most literal version of the pattern, first with three pins (the first GIF in this post), and then four:</p>

      <figure class="row">
        <img src="helping-hands.jpg" alt="'helping hands' holding bent wires ready to solder the first LEDs" />
        <video poster="4-wire.jpg" autoplay loop>
          <source src="4-wire.webm" />
          <source src="4-wire.mp4" />
          <img src="4-wire.jpg" alt="another tiny LED sculpture with 12 surface-mount LEDs soldered directly onto four wires, flashing in a fast descending pattern" />
        </video>
      </figure>

      <p>The wires have a nice visual pattern with all wires travelling the same direction on the same side. The LEDs themselves are structural, anchoring between the wires at each intersection and keeping them apart. I wanted to try for a classic under/over weave, so I pulled some multi-strand wire apart and gave it a shot:</p>

      <figure>
        <div class="row">
          <img src="weave-attempt.jpg" alt="seven thin wires weaving around 42 small pink LEDs">
          <video autoplay loop>
            <source src="weave-attempt.webm" />
            <source src="weave-attempt.mp4" />
          </video>
        </div>
        <figcaption><em>I am leaving out my hairball-like actual first try at this :)</em></figcaption>
      </figure>

      <p>I was ambitious, and upped it to 7 pins, for 42 individual LEDs. It was not a perfect success. It's likely that I soldered some shorts I couldn't find, and some of the delicate SMD LEDs may have been physically compromised. I also probably made mistakes orienting the LEDs correctly with all that over/under back-and-forth to keep track of!</p>

      <p>Still, I learned a lot! Especially about how hard it can be to debug Charlieplexed arrays. But also, that this weaving pattern creates a really nice visual texture, and the resulting material feels good: sturdy yet flexible.</p>

      <p>I'd like to dive deeper in this direction! I want to make bigger meshes, and I want to try other weaving patterns, like <a href="https://en.wikipedia.org/wiki/Twill" target="_blank">twills</a>, or maybe <a href="https://en.wikipedia.org/wiki/Houndstooth" target="_blank">houndstooth</a>? Maybe these can result in glowy-meshy materials with different flexing/stretching properties!</p>

      <p>For the time beeing, I'm falling down several different other rabit holes from this. In <a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank">their post</a>, M Rule proposes some fancy alternate layouts for the mesh, still following the same basic pattern:</p>

      <figure>
        <div class="row">
          <a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank">
            <img
              alt="alternate layout patterns proposed by M Rule for hand-wiring charlie-plexed LED matrices"
              src="m-rule-layouts.png"
            />
          </a>
        </div>
        <figcaption>Really, the post is so good, <a href="https://crawlingrobotfortress.blogspot.com/2019/02/led-multiplexing-layouts-for-hand.html" target="_blank">check it outttt</a> ‚ú®</figcaption>
      </figure>

      <p>The cylinder immediately jumps out at me, because it seems like a short gap from there to a sphere! (I spend way too much time thinking about <a href="https://en.wikipedia.org/wiki/Map_projection" target="_blank">map projections</a>&hellip;). A couple neat things going down this path:</p>

      <ul>
        <li><p>When the cylinder wraps around, each wire meets back at itself perfectly! They go up at an angle to the top, then back down and meet themselves back at the bottom, in a sort of diamond or triangle-wave pattern.</p></li>
        <li><p>When you start pulling in the top and bottom to make it spherical, the wire <em>angles</em> at the top and bottom turnarounds start straightening out out&hellip;</p></li>
        <li><p>&hellip;until YOU COULD ACTUALY JUST MAKE ALL THE WIRES BE CIRCLES!?</li></p>
      </ul>

      <p>It's easier to show this with a picture. Mocked up with five loops of wire:</p>

      <figure class="row">
        <img src="5-ring-test-assembly.jpg" alt="holding wires in place with alligator clips and helping hands to get five rings in place" />
        <img src="5-ring-test-assembled.jpg" alt="five rings of thick wire, tilted and rotated so they outline a sphere, with pentagonal holes at the top and bottom. small pieces of tape hold it together." />
      </figure>

      <p>Promising! Every ring crosses every other ring twice (remember we connect every pin to every other pin twice in charlieplexing!) We could get a bigger array by just fitting in more rings. They sort of tilt-then-rotate in this pattern. I <del>quickly</del> soldered up a test with 20 pink LEDs:</p>

      <figure class="row">
        <img src="5-ring-led-test.jpg" alt="five lumpy wire rings outlining a sphere with LEDs connecting them." />
        <video autoplay loop>
          <source src="5-ring-led-test.webm" />
          <source src="5-ring-led-test.mp4" />
        </video>
      </figure>

      <p>And then I danced a bit.</p>

      <p>From here, a number of projects have sprouted! A teaser:</p>

      <figure class="row">
        <img src="4-rings.jpg" alt="small metal sculpture made of four circular rings connected with glowing pink LEDs. a coin-cell battery is suspended in the centre by resistors. It's a glowy sparkly ball and here's another hint, this project goes in a touch-sensing interactive lil friend direction :)" />
      </figure>

      <hr />

      <h3>post script</h3>

      <p>I've mostly worked on this at <a href="https://interaccess.org/" target="_blank">InterAccess</a> in Toronto. They have nice soldering irons and stuff, and folks are nice. Come by Wednesday evenings for community nights, it's free!</p>

      <p>for myself in the future: <code>MOV -> WEBM</code> crop/scale/not taking a hundred years: <small><code>ffmpeg -i IMG_5940.MOV -an -vframes 90 -vf crop=1080:768:0:420,scale=600x427 -cpu-used 1 4-wire.webm</code></small></p>

      <p><a href="/">more stuff</a> ‚ú®</p>

    </div>
    <img src="https://counter.cv2.ca/count.gif" style="position:absolute;left:-9999em" alt="visitor counter" aria-hidden="true" />
  </body>
</html>
